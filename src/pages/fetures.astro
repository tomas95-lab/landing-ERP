---
import ModuleCard from "@/components/ModuleCard.astro";
import dashboard from "../../public/dashboard.png";
import projects from "../../public/projects.png";
import planner from "../../public/planner.png";
import suppliers from "../../public/suppliers.png";
import purchaseOrders from "../../public/orders.png";
import invoices from "../../public/invoices.png";
import expenses from "../../public/expenses.png";
---

<style>
  /* Estilos para las animaciones */
  .fade-item {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  
  .fade-right {
    opacity: 0;
    transform: translateX(-50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  
  .fade-left {
    opacity: 0;
    transform: translateX(50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  
  .fade-in {
    opacity: 1;
    transform: translate(0);
  }
</style>

<script>
  // Configuración y activación del Intersection Observer
  document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          console.log(`Animating: ${entry.target.className}`); // Debug log
          entry.target.classList.add('fade-in');
          // Opcional: desconectar el observer después de animar
          observer.unobserve(entry.target);
        }
      });
    }, {
      root: null, // viewport
      threshold: 0.1, // 10% del elemento debe ser visible
      rootMargin: '-50px 0px' // empezar cuando el elemento está a 50px de entrar en el viewport
    });
    
    // Observar todos los elementos con clase de animación
    document.querySelectorAll('.fade-item, .fade-right, .fade-left').forEach(el => {
      observer.observe(el);
    });
  });
</script>

<section class="py-24 bg-gradient-to-b to-white from-blue-50">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16 fade-item">
      <h1 class="text-4xl md:text-5xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-800 mb-6">
        Built to Manage Every Step
      </h1>
      <p class="text-xl text-gray-600 max-w-2xl mx-auto">
        From planning projects to tracking expenses, SitePilot ERP gives you complete control over your construction operations.
      </p>
    </div>

    <div class="fade-right">
      <ModuleCard 
        title="Project & Financial Overview" 
        description="View your active projects, financial KPIs, and cost tracking in real-time — all from a single powerful dashboard." 
        imageSrc={dashboard.src} 
        imageAlt="Dashboard Overview" 
        background="#FFFFFF"
      />
    </div>

    <div class="fade-left">
      <ModuleCard 
        title="Project Management" 
        description="Manage ongoing, pending, and completed projects with full visibility over deadlines, budgets, and assignments." 
        imageSrc={projects.src} 
        imageAlt="Projects Management" 
        reverse={true} 
        background="#F5F7FA"
      />
    </div>

    <div class="fade-right">
      <ModuleCard 
        title="Project Planning & Collaboration" 
        description="Assign tasks, manage project phases, upload designs, and collaborate in real time." 
        imageSrc={planner.src} 
        imageAlt="Project Planner" 
        background="#FFFFFF"
      />
    </div>

    <div class="fade-left">
      <ModuleCard 
        title="Supplier Management" 
        description="Monitor supplier activities, performance metrics, and manage onboarding processes easily." 
        imageSrc={suppliers.src} 
        imageAlt="Supplier Management" 
        reverse={true} 
        background="#F5F7FA"
      />
    </div>

    <div class="fade-right">
      <ModuleCard 
        title="Procurement & Orders" 
        description="Create, approve, and track purchase orders with supplier integration and status updates." 
        imageSrc={purchaseOrders.src} 
        imageAlt="Purchase Orders" 
        background="#FFFFFF"
      />
    </div>

    <div class="fade-left">
      <ModuleCard 
        title="Invoicing & Payments" 
        description="Monitor issued invoices, payment statuses, and overdue bills with clear analytics." 
        imageSrc={invoices.src} 
        imageAlt="Invoices & Payments" 
        reverse={true} 
        background="#F5F7FA"
      />
    </div>

    <div class="fade-right">
      <ModuleCard 
        title="Expense Tracking" 
        description="Track project expenses, analyse cost categories, and manage budgets with real-time updates." 
        imageSrc={expenses.src} 
        imageAlt="Expense Tracking" 
        background="#FFFFFF"
      />
    </div>
  </div>
</section>